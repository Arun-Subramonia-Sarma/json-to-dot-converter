{
  "metadata": {
    "title": "Rate Explorer Data Model Visualization",
    "version": "1.0",
    "description": "Data model for rate inquiry and management system",
    "created_date": "2024-12-15T10:00:00Z",
    "created_by": "Data Architecture Team"
  },
  "diagram_settings": {
    "rankdir": "TB",
    "node_defaults": {
      "fontname": "Arial",
      "shape": "none"
    }
  },
  "entities": [
    {
      "id": "carrier",
      "name": "Carrier",
      "fields": [
        {"name": "requestId", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "requestTimestamp", "type": "datetime", "is_required": true},
        {"name": "requestor", "type": "string", "is_required": false},
        {"name": "shipmentDetails", "type": "object", "is_required": true},
        {"name": "preferences", "type": "object", "is_required": false}
      ],
      "description": "Rate inquiry request"
    },
    {
      "id": "shipper",
      "name": "Shipper",
      "fields": [
        {"name": "requestId", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "requestTimestamp", "type": "datetime", "is_required": true},
        {"name": "requestor", "type": "string", "is_required": false},
        {"name": "shipmentDetails", "type": "object", "is_required": true},
        {"name": "preferences", "type": "object", "is_required": false}
      ],
      "description": "Rate inquiry request"
    },
    {
      "id": "contract",
      "name": "Contract",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "name", "type": "string", "is_required": true},
        {"name": "number", "type": "string", "is_required": true},
        {"name": "group", "type": "string", "is_required": true},
        {"name": "effective_date", "type": "date", "is_required": true},
        {"name": "expiry_date", "type": "date", "is_required": false},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ]
    },
    {
      "id": "service_type",
      "name": "Service Type",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "name", "type": "string", "is_required": true},
        {"name": "code", "type": "string", "is_required": true},
        {"name": "description", "type": "string", "is_required": false},
        {"name": "transit_mode", "type": "string", "is_required": true},
        {"name": "gl_type", "type": "string", "is_required": true},
        {"name": "external_id_1", "type": "string", "is_required": false},
        {"name": "external_id_2", "type": "string", "is_required": false},
        {"name": "performance_rating", "type": "number", "is_required": false},
        {"name": "priority", "type": "int", "is_required": true},
        {"name": "effective_date", "type": "date", "is_required": true},
        {"name": "expiry_date", "type": "date", "is_required": false},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ]
    },
    {
      "id": "location",
      "name": "Location",
      "fields": [
        {"name": "locationCode", "type": "string", "is_required": true, "is_key": true, "description": "UN/LOCODE"},
        {"name": "locationName", "type": "string", "is_required": true},
        {"name": "city", "type": "string", "is_required": false},
        {"name": "country", "type": "string", "is_required": true},
        {"name": "countryCode", "type": "string", "is_required": true, "description": "ISO 2-letter"},
        {"name": "coordinates", "type": "object", "is_required": false, "description": "lat/lon"},
        {"name": "timezone", "type": "string", "is_required": false}
      ],
      "description": "Geographic location",
      "constraints": [
        "Pattern: ^[A-Z]{2}[A-Z0-9]{3}$"
      ]
    },
    {
      "id": "rate",
      "name": "Rate",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "rate_per_unit", "type": "string", "is_required": false},
        {"name": "rate_uom", "type": "ENUM", "is_required": false},
        {"name": "min_charge", "type": "string", "is_required": false},
        {"name": "max_charge", "type": "string", "is_required": false},
        {"name": "transit_time", "type": "string", "is_required": false},
        {"name": "transit_time_uom", "type": "ENUM", "is_required": false},
        {"name": "valid_period", "type": "string", "is_required": false},
        {"name": "valid_period_uom", "type": "ENUM", "is_required": false},
        {"name": "effective_date", "type": "date", "is_required": true},
        {"name": "expiry_date", "type": "date", "is_required": false},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ]
    },
    {
      "id": "rate_type",
      "name": "Rate Type",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "code", "type": "string", "is_required": true},
        {"name": "name", "type": "string", "is_required": true},
        {"name": "description", "type": "string", "is_required": false},
        {"name": "calculation_method", "type": "ENUM", "is_required": true},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ]
    },
    {
      "id": "rate_break",
      "name": "Rate Break",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "break_value", "type": "string", "is_required": true},
        {"name": "break_value_type", "type": "ENUM", "is_required": true},
        {"name": "rate_per_unit", "type": "string", "is_required": false},
        {"name": "rate_uom", "type": "ENUM", "is_required": false},
        {"name": "effective_date", "type": "date", "is_required": true},
        {"name": "expiry_date", "type": "date", "is_required": false},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ],
      "constraints": [
        "break_value_type : lower_limit / higher_limit",
        "status: active / inactive / archived"
      ]
    },
    {
      "id": "demurrage_rates",
      "name": "Demurrage Rates",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "free_days", "type": "string", "is_required": true},
        {"name": "calculation_type", "type": "ENUM", "is_required": true},
        {"name": "charges", "type": "string", "is_required": true},
        {"name": "direction", "type": "ENUM", "is_required": true},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ],
      "constraints": [
        "direction : export / import",
        "calculation_type : combined / standard",
        "status: active / inactive / archived"
      ]
    },
    {
      "id": "demurrage_rates_break",
      "name": "Demurrage Rates Break",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "break_value", "type": "string", "is_required": true},
        {"name": "break_value_type", "type": "ENUM", "is_required": true},
        {"name": "charges", "type": "string", "is_required": true},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ],
      "constraints": [
        "break_value_type : lower_limit / higher_limit"
      ]
    },
    {
      "id": "detention_rates",
      "name": "Detention Rates",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "free_days", "type": "string", "is_required": true},
        {"name": "calculation_type", "type": "ENUM", "is_required": true},
        {"name": "charges", "type": "string", "is_required": true},
        {"name": "direction", "type": "string", "is_required": true},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ],
      "constraints": [
        "direction : export / import",
        "calculation_type : combined / standard"
      ]
    },
    {
      "id": "detention_rates_break",
      "name": "Detention Rates Break",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "break_value", "type": "string", "is_required": true},
        {"name": "break_value_type", "type": "ENUM", "is_required": true},
        {"name": "charges", "type": "string", "is_required": true},
        {"name": "status", "type": "ENUM", "is_required": true},
        {"name": "notes", "type": "string", "is_required": false}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ],
      "constraints": [
        "break_value_type : lower_limit / higher_limit"
      ]
    },
    {
      "id": "contract_charge",
      "name": "Contract Charge",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true}
      ]
    },
    {
      "id": "service_commitment",
      "name": "Service Commitment",
      "fields": [
        {"name": "id", "type": "UUID", "is_required": true, "is_key": true},
        {"name": "name", "type": "string", "is_required": true},
        {"name": "code", "type": "string", "is_required": true},
        {"name": "transit_min", "type": "int", "is_required": true},
        {"name": "transit_max", "type": "int", "is_required": true},
        {"name": "transit_uom", "type": "ENUM", "is_required": true},
        {"name": "delivery_by_time", "type": "timestamp", "is_required": true},
        {"name": "validate_period", "type": "int", "is_required": true},
        {"name": "validate_period_uom", "type": "ENUM", "is_required": true},
        {"name": "cut_off_time", "type": "timestamp", "is_required": true},
        {"name": "is_guaranteed", "type": "bool", "is_required": true},
        {"name": "status", "type": "ENUM", "is_required": true}
      ],
      "special_sections": [
        {"name": "Auditable fields", "type": "object", "style": "bold_red"}
      ]
    }
  ],
  "relationships": [
    {"id": "rel_contract_carrier", "from_entity": "contract", "to_entity": "carrier", "label": "CARRIER_PARTY", "relationship_type": "many_to_many"},
    {"id": "rel_contract_shipper", "from_entity": "contract", "to_entity": "shipper", "label": "SHIPPER_PARTY", "relationship_type": "many_to_many"},
    {"id": "rel_contract_rate", "from_entity": "contract", "to_entity": "rate", "label": "SPECIFIES_FREIGHT", "relationship_type": "one_to_many"},
    {"id": "rel_contract_service_type", "from_entity": "contract", "to_entity": "service_type", "label": "COVERS", "relationship_type": "many_to_many"},
    {"id": "rel_contract_contract_charge", "from_entity": "contract", "to_entity": "contract_charge", "label": "HAS_CHARGE", "relationship_type": "one_to_many"},
    {"id": "rel_contract_demurrage", "from_entity": "contract", "to_entity": "demurrage_rates", "label": "DEFINES_DEMURRAGE", "relationship_type": "one_to_many"},
    {"id": "rel_contract_detention", "from_entity": "contract", "to_entity": "detention_rates", "label": "DEFINES_DETENTION", "relationship_type": "one_to_many"},
    {"id": "rel_rate_rate_type", "from_entity": "rate", "to_entity": "rate_type", "label": "OF_TYPE", "relationship_type": "many_to_one"},
    {"id": "rel_rate_rate_break", "from_entity": "rate", "to_entity": "rate_break", "label": "APPLIES_BREAK", "relationship_type": "one_to_many"},
    {"id": "rel_demurrage_break", "from_entity": "demurrage_rates", "to_entity": "demurrage_rates_break", "label": "APPLIES_BREAK", "relationship_type": "one_to_many"},
    {"id": "rel_detention_break", "from_entity": "detention_rates", "to_entity": "detention_rates_break", "label": "APPLIES_BREAK", "relationship_type": "one_to_many"},
    {"id": "rel_service_commitment", "from_entity": "service_type", "to_entity": "service_commitment", "label": "HAS_COMMITMENT", "relationship_type": "one_to_many"}
  ],
  "layout_hints": {
    "same_rank_groups": [
      ["rate_type", "rate_break"]
    ]
  }
}